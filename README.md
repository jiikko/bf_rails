# README
* BF APIを使った注文ツール

## アーキテクチャ
* ポーリングして画面をリフレッシュする
```
[BF API]
  |    \
  |     \
[WEB] --- [Resque]
  |     /
  |    /
[MySQL]
```

## Install
```
bundle exec rails bf_engine:install:migrations
bundle exec rails db:migrate
```

## Usage
```
bundle exec foreman start
```

## メモ
* 買いから入るので大きな下落に巻き込まれると終了する
* 直近15分くらいの幅しか見ていないので落ちそうだと思ったら自分で停止しなければならぬ

## TODO
* foremanが停止したらjsが無限にポーリングするのでjsで例外処理を行ってその旨を表示する
* foreman 管理下のプロセスが終了したらresqueも終了して売りを発注しないまま終了する、というのがあるので起動コマンドは別で作成する
  * foremanで resqueを起動しない
* 注文一覧をクリックしたら詳細がスライドして出てくるようにする
* 発注クリックしたらテーブルに1行追加する
  * クリック後にリアクションがないので連打しがちなのでリアクションが欲しい
* 設定画面を別ページの設ける
* 幅と枚数を画面から設定できる
* ページにテーマを当てることができる
* resque-schedulerを別プロセスでたてる
  * ジョブが不良の事故でリトライされずに破棄された場合、約定したのにステータスが更新されなくなった取引レコードが残り続ける問題がある
  * 定期的に約定をチェックするジョブを実行したいのでそれをresque-schedulerで走らせる
